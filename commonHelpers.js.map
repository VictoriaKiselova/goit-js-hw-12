{"version":3,"file":"commonHelpers.js","sources":["../src/img/javascript.svg","../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__90c1298d__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport icon from '../img/javascript.svg';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { loading } from '../main.js';\nimport { nextPage } from '../main.js';\n\nexport const gallery = document.querySelector('.list-gallery');\n\nexport function showImages(data) {\n\n  if (data.hits.length === 0) {\n    gallery.innerHTML = null;\n    loading.classList.remove('loader');\n    nextPage.classList.remove('show-button');\n   \n    return iziToast.show({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n      iconUrl: icon,\n      color: '#E78E8E',\n      messageColor: 'white',\n      timeout: 3000,\n      imageWidth: 50,\n      position: 'topRight',\n      maxWidth: 420,\n    });\n  } \n  if (data.hits) {  \n    \n    loading.classList.remove('loader');\n    nextPage.classList.add('show-button');\n    const markup = data.hits\n      .map(element => {\n        return `<li class=\"gallery\"><a href=\"${element.largeImageURL}\"><img src=\"${element.webformatURL}\" alt=\"${element.tags}\"></a>\n   <div class=\"deskr-container\"> <p>Likes<span>${element.likes}</span></p>\n    <p>Views<span>${element.views}</span></p>\n    <p>Comments<span>${element.comments}</span></p>\n    <p>Downloads<span>${element.downloads}</span></p> </div>\n  </li>`;\n      })\n      .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n  }\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captions: true,\n    captionSelector: 'img',\n    captionsData: 'alt',\n  });\n  lightbox.refresh();\n}\n","import axios from 'axios';\nimport { showImages } from './render-functions.js';\nimport { hideNextButton } from '../main.js';\nconst API_KEY = '42512841-77167630e6162aef67a2d6614';\n\nexport async function getRequest(q, current_page) {\n  await axios\n    .get('https://pixabay.com/api/', {\n      params: {\n        per_page: 200,\n        page: current_page,\n        key: API_KEY,\n        q: q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n      },\n    })\n    .then(response => {\n      console.log(response.data);\n      showImages(response.data);\n      console.log(response.data.totalHits);\n      hideNextButton(response.data.totalHits);\n      // return response.data;\n\n      // console.log(response.status);\n      // console.log(response.statusText);\n      // console.log(response.headers);\n      // console.log(response.config);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n}\n// axios.defaults.baseURL = 'https://pixabay.com/api';\n// axios.defaults.headers.common['header-name'] = API_KEY;\n// catch (error) {\n//   console.error(error);\n\n// }\n\n// try {\n//   const response = await axios.get(\n//     `/&q=${q}&image_type=photo&orientation=horizontal&safesearch=true`\n//   );\n//   console.log(response);\n// } catch (error) {\n//   console.error(error);\n// }\n\n// async function (q) {\n\n//   axios\n//     .get(\n//     '/?key=${API_KEY}&q=${q}&image_type=photo&orientation=horizontal&safesearch=true'\n//     )\n//     .then(response => {\n//       console.log(response.data);\n//       console.log(response.status);\n//       console.log(response.statusText);\n//       console.log(response.headers);\n//       console.log(response.config);\n//     })\n//     .catch(error => {\n//       console.log(error);\n//     });\n// }\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport axios from 'axios';\nimport { getRequest } from './js/pixabay-api.js';\nimport { gallery } from './js/render-functions.js';\n\nexport const loading = document.querySelector('.loading');\nexport const nextPage = document.querySelector('.loading-more-img');\nconst boxLoad = document.querySelector('.btn-load-box');\nconst form = document.querySelector('.form');\n\nlet current_page = 1;\nlet searchValue;\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  gallery.innerHTML = null;\n  loading.classList.add('loader');\n  searchValue = event.target.elements.search.value.trim();\n\n  if (searchValue === '') {\n    return;\n  } else {\n    getRequest(searchValue);\n  }\n  form.reset();\n});\n\nnextPage.addEventListener('click', event => {\n  loading.classList.add('loader');\n  boxLoad.appendChild(loading);\n  current_page++;\n  getRequest(searchValue, current_page);\n});\n\nexport function hideNextButton(totalHits) {\n  console.log(totalHits);\n  console.log(current_page);\n  let a = current_page * 200;\n  console.log(a);\n  if (a > totalHits) {\n    nextPage.classList.remove('show-button');\n    return iziToast.show({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      color: 'blue',\n      messageColor: 'black',\n      timeout: 1000,\n      imageWidth: 50,\n      position: 'bottomRight',\n      maxWidth: 420,\n    });\n  }\n}\n"],"names":["icon","gallery","showImages","data","loading","nextPage","iziToast","markup","element","SimpleLightbox","API_KEY","getRequest","q","current_page","axios","response","hideNextButton","error","boxLoad","form","searchValue","event","totalHits"],"mappings":"owBAAA,MAAeA,EAAA,gDCQFC,EAAU,SAAS,cAAc,eAAe,EAEtD,SAASC,EAAWC,EAAM,CAE/B,GAAIA,EAAK,KAAK,SAAW,EACvB,OAAAF,EAAQ,UAAY,KACpBG,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAS,UAAU,OAAO,aAAa,EAEhCC,EAAS,KAAK,CACnB,QACE,2EACF,QAASN,EACT,MAAO,UACP,aAAc,QACd,QAAS,IACT,WAAY,GACZ,SAAU,WACV,SAAU,GAChB,CAAK,EAEH,GAAIG,EAAK,KAAM,CAEbC,EAAQ,UAAU,OAAO,QAAQ,EACjCC,EAAS,UAAU,IAAI,aAAa,EACpC,MAAME,EAASJ,EAAK,KACjB,IAAIK,GACI,gCAAgCA,EAAQ,aAAa,eAAeA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA,iDAC5EA,EAAQ,KAAK;AAAA,oBAC1CA,EAAQ,KAAK;AAAA,uBACVA,EAAQ,QAAQ;AAAA,wBACfA,EAAQ,SAAS;AAAA,QAElC,EACA,KAAK,EAAE,EACVP,EAAQ,mBAAmB,YAAaM,CAAM,CAC/C,CACgB,IAAIE,EAAe,aAAc,CAChD,aAAc,IACd,SAAU,GACV,gBAAiB,MACjB,aAAc,KAClB,CAAG,EACQ,QAAO,CAClB,CCjDA,MAAMC,EAAU,qCAET,eAAeC,EAAWC,EAAGC,EAAc,CAChD,MAAMC,EACH,IAAI,2BAA4B,CAC/B,OAAQ,CACN,SAAU,IACV,KAAMD,EACN,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACP,CAAK,EACA,KAAKG,GAAY,CAChB,QAAQ,IAAIA,EAAS,IAAI,EACzBb,EAAWa,EAAS,IAAI,EACxB,QAAQ,IAAIA,EAAS,KAAK,SAAS,EACnCC,EAAeD,EAAS,KAAK,SAAS,CAO5C,CAAK,EACA,MAAME,GAAS,CACd,QAAQ,IAAIA,CAAK,CACvB,CAAK,CACL,CCxBO,MAAMb,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,SAAS,cAAc,mBAAmB,EAC5Da,EAAU,SAAS,cAAc,eAAe,EAChDC,EAAO,SAAS,cAAc,OAAO,EAE3C,IAAIN,EAAe,EACfO,EAEJD,EAAK,iBAAiB,SAAUE,GAAS,CACvCA,EAAM,eAAc,EACpBpB,EAAQ,UAAY,KACpBG,EAAQ,UAAU,IAAI,QAAQ,EAC9BgB,EAAcC,EAAM,OAAO,SAAS,OAAO,MAAM,OAE7CD,IAAgB,KAGlBT,EAAWS,CAAW,EAExBD,EAAK,MAAK,EACZ,CAAC,EAEDd,EAAS,iBAAiB,QAASgB,GAAS,CAC1CjB,EAAQ,UAAU,IAAI,QAAQ,EAC9Bc,EAAQ,YAAYd,CAAO,EAC3BS,IACAF,EAAWS,EAAaP,CAAY,CACtC,CAAC,EAEM,SAASG,EAAeM,EAAW,CACxC,QAAQ,IAAIA,CAAS,EACrB,QAAQ,IAAIT,CAAY,EACxB,IAAI,EAAIA,EAAe,IAEvB,GADA,QAAQ,IAAI,CAAC,EACT,EAAIS,EACN,OAAAjB,EAAS,UAAU,OAAO,aAAa,EAChCC,EAAS,KAAK,CACnB,QAAS,6DACT,MAAO,OACP,aAAc,QACd,QAAS,IACT,WAAY,GACZ,SAAU,cACV,SAAU,GAChB,CAAK,CAEL"}